<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Résultats - Switch2Green</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        /* Styles pour le tableau */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 1em;
            font-family: Arial, sans-serif;
            text-align: left;
        }
        table thead tr {
            background-color: #009879;
            color: #ffffff;
            text-align: left;
        }
        table th, table td {
            padding: 12px 15px;
            border: 1px solid #dddddd;
        }
        table tbody tr:nth-child(even) {
            background-color: #f3f3f3;
        }
        table tbody tr:hover {
            background-color: #f1f1f1;
        }
    </style>
</head>
<body>
    <!-- Include Header -->
    <div id="header">
        <!-- Header content will be dynamiquement loaded -->
    </div>

    <main>
        <section class="resultats">
            <h1>Résultats de votre recherche</h1>
            <p>Voici les véhicules qui correspondent à vos critères :</p>
            <div id="resultats">
                <!-- Les résultats seront ajoutés ici dynamiquement -->
            </div>
        </section>
    </main>

    <!-- Include Footer -->
    <div id="footer">
        <!-- Footer content will be dynamiquement loaded -->
    </div>

    <script>
        // Charger le header et le footer
        fetch('../components/header.html')
            .then(response => response.text())
            .then(data => document.getElementById('header').innerHTML = data);

        fetch('../components/footer.html')
            .then(response => response.text())
            .then(data => document.getElementById('footer').innerHTML = data);

        // Charger les résultats depuis le localStorage
        document.addEventListener('DOMContentLoaded', () => {
            const resultats = JSON.parse(localStorage.getItem('resultats')) || [];
            const resultatsContainer = document.getElementById('resultats');

            if (resultats.length === 0) {
                resultatsContainer.innerHTML = '<p>Aucun véhicule ne correspond à vos critères.</p>';
            } else {
                // Créer un tableau pour afficher les résultats
                const table = document.createElement('table');
                const thead = document.createElement('thead');
                const tbody = document.createElement('tbody');

                // Ajouter les en-têtes du tableau
                thead.innerHTML = `
                    <tr>
                        <th>Marque</th>
                        <th>Modèle</th>
                        <th>Année</th>
                        <th>Carburant</th>
                        <th>Puissance (chevaux)</th>
                        <th>Carrosserie</th>
                        <th>Gamme</th>
                        <th>CO2 (g/km)</th>
                    </tr>
                `;

                // Ajouter les lignes des résultats
                resultats.forEach(vehicule => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${vehicule.marque}</td>
                        <td>${vehicule.modele_dossier}</td>
                        <td>${vehicule.annee}</td>
                        <td>${vehicule.carburant}</td>
                        <td>${vehicule.puissance_maximale}</td>
                        <td>${vehicule.carrosserie}</td>
                        <td>${vehicule.gamme}</td>
                        <td>${vehicule.co2_g_km}</td>
                    `;
                    tbody.appendChild(row);
                });

                // Assembler le tableau
                table.appendChild(thead);
                table.appendChild(tbody);
                resultatsContainer.appendChild(table);
            }
        });
    </script>
</body>
</html>